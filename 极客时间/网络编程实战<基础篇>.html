<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/wiki/static/css/tango.css">
    <link rel="shortcut icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/wiki/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>网络编程实战 <基础篇> - </title>
    <meta name="keywords" content=""/>
    <meta name="description" content=""/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/wiki/">Home</a>&nbsp;&#187;&nbsp;<a href="/wiki/#极客时间">极客时间</a>&nbsp;&#187;&nbsp;网络编程实战 <基础篇>
    <span class="updated">Page Updated&nbsp;
      2020-05-02 15:57
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">网络编程实战 <基础篇></div>

  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#tcpip-linux">TCP/IP 和 Linux 发展史</a><ul>
<li><a href="#tcpip">TCP/IP 发展历史</a><ul>
<li><a href="#osi-tcpip">OSI &amp; TCP/IP</a></li>
</ul>
</li>
<li><a href="#unix">UNIX 操作系统发展历史</a><ul>
<li><a href="#svr-4">SVR 4</a></li>
<li><a href="#solaris">Solaris</a></li>
<li><a href="#bsd">BSD</a></li>
<li><a href="#macos-x">macOS X</a></li>
</ul>
</li>
<li><a href="#linux">Linux</a><ul>
<li><a href="#unix_1">UNIX 的出现和发展</a></li>
<li><a href="#posix">POSIX 标准</a></li>
<li><a href="#minix">Minix 操作系统</a></li>
<li><a href="#gnu">GNU</a></li>
</ul>
</li>
<li><a href="#tcpip_1">操作系统对 TCP/IP 的支持</a></li>
</ul>
</li>
<li><a href="#_1">网络编程模型</a><ul>
<li><a href="#-">客户端 - 服务器网络编程模型</a></li>
<li><a href="#ip">IP 和端口</a><ul>
<li><a href="#_2">保留网段</a></li>
</ul>
</li>
<li><a href="#_3">数据报和字节流</a></li>
</ul>
</li>
<li><a href="#_4">套接字和地址</a><ul>
<li><a href="#socket">socket</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="tcpip-linux">TCP/IP 和 Linux 发展史</h1>
<h2 id="tcpip">TCP/IP 发展历史</h2>
<h3 id="osi-tcpip">OSI &amp; TCP/IP</h3>
<p><img alt="OSI-TCP/IP" src="/wiki/images/geektime/network-programming/cb34e0e3b7769498ea703fe6231201b4.png" /></p>
<h2 id="unix">UNIX 操作系统发展历史</h2>
<p><img alt="Unix History" src="/wiki/images/geektime/network-programming/a68c3b9b267574ea2f309ed6a4e0de0f.png" /></p>
<p>UNIX 的各种版本和变体都起源于在 PDP-11 系统上运行的 UNIX 分时系统第 6 版（1976 年）和第 7 版（1979 年），它们通常分别被称为 V6 和 V7。这两个版本是在贝尔实验室以外首先得到广泛应用的 UNIX 系统。</p>
<p><img alt="Unix History" src="/wiki/images/geektime/network-programming/df2b6d77a0a46e3d9b068f6d517a15bb.png" /></p>
<h3 id="svr-4">SVR 4</h3>
<p>SVR4（UNIX System V Release 4）是 AT&amp;T 的 UNIX 系统实验室的一个商业产品。它基本上是一个操作系统的大杂烩，这个操作系统之所以重要，是因为它是 System III/V 分支各家商业化 UNIX 操作系统的“先祖”，包括 IBM 的 AIX、HP 的 HP-UX、SGI 的 IRIX、Sun（后被 Oracle 收购）的 Solaris 等等。</p>
<h3 id="solaris">Solaris</h3>
<p>Solaris 是由 Sun Microsystems（现为 Oracle）开发的 UNIX 系统版本，它基于 SVR4，并且在商业上获得了不俗的成绩。2005 年，Sun Microsystems 开源了 Solaris 操作系统的大部分源代码，作为 OpenSolaris 开放源代码操作系统的一部分。相对于 Linux，这个开源操作系统的进展比较一般。</p>
<h3 id="bsd">BSD</h3>
<p>BSD（Berkeley Software Distribution）是由加州大学伯克利分校的计算机系统研究组（CSRG）研究开发和分发的。4.2BSD 于 1983 年问世，其中就包括了网络编程套接口相关的设计和实现，4.3BSD 则于 1986 年发布，正是由于 TCP/IP 和 BSD 操作系统的完美拍档，才有了 TCP/IP 逐渐成为事实标准的这一历史进程。</p>
<h3 id="macos-x">macOS X</h3>
<p>macOS 和 Linux 都是 UNIX 基础上发展起来的，或者说，它们各自就是一个类 UNIX 的系统。</p>
<p>macOS 系统又被称为 Darwin，它已被验证过就是一个 UNIX 操作系统。如果打开 Mac 系统的 socket.h 头文件定义，你会明显看到 macOS 系统和 BSD 千丝万缕的联系，说明这就是从 BSD 系统中移植到 macOS 系统来的。</p>
<h2 id="linux">Linux</h2>
<h3 id="unix_1">UNIX 的出现和发展</h3>
<p>Linux 操作系统刚出世的时候， 4.2/4.3 BSD 已经出现快 10 年了，这样就为 Linux 系统的发展提供了一个方向，而且 Linux 的开发语言是 C 语言，C 语言也是在 UNIX 开发过程中发明的一种语言。</p>
<h3 id="posix">POSIX 标准</h3>
<p>POSIX（Portable Operating System Interface for Computing Systems）标准基于现有的 UNIX 实践和经验，描述了操作系统的调用服务接口。有了这么一个标准，Linux 完全可以去实现并兼容它，这从最早的 Linux 内核头文件的注释可见一斑。</p>
<div class="hlcode"><pre><span class="cp"># ifndef _UNISTD_H</span>

<span class="cp"># define _UNISTD_H</span>


<span class="cm">/* ok, this may be a joke, but I&#39;m working on it */</span>

<span class="cp"># define _POSIX_VERSION  198808L</span>


<span class="cp"># define _POSIX_CHOWN_RESTRICTED </span><span class="cm">/* only root can do a chown (I think..) */</span><span class="cp"></span>

<span class="cm">/* #define _POSIX_NO_TRUNC*/</span> <span class="cm">/* pathname truncation (but see in kernel) */</span>

<span class="cp"># define _POSIX_VDISABLE &#39;\0&#39; </span><span class="cm">/* character to disable things like ^C */</span><span class="cp"></span>

<span class="cm">/*#define _POSIX_SAVED_IDS */</span> <span class="cm">/* we&#39;ll get to this yet */</span>

<span class="cm">/*#define _POSIX_JOB_CONTROL */</span> <span class="cm">/* we aren&#39;t there quite yet. Soon hopefully */</span>
</pre></div>


<h3 id="minix">Minix 操作系统</h3>
<p>Minix 操作系统在早期是 Linux 发展的重要指引。这个操作系统是由一个叫做安迪·塔能鲍姆（Andy Tanenbaum）的教授开发的，他的本意是用来做 UNIX 教学的。Linux 早期从 Minix 中借鉴了一些思路，包括最早的文件系统等。</p>
<h3 id="gnu">GNU</h3>
<p>Linux 操作系统得以发展还有一个非常重要的因素，那就是 GNU（GNU’s NOT UNIX），它的创始人是理查·斯托曼（Richard Stallman）。斯托曼的想法是设计一个完全自由的软件系统，用户可以自由使用，自由修改这些软件系统。</p>
<p>在这个设想宏大的 GNU 计划里，包括了操作系统内核、编辑器、shell、编译器、链接器和汇编器等等。</p>
<p>斯托曼独自开发出了编辑器 Emacs，继而组织和成立了自由软件基金会（the Free Software Foundation - FSF）。GNU 在自由软件基金会统一组织下，相继推出了编译器 GCC、调试器 GDB、Bash Shell 等运行于用户空间的程序。正是这些软件为 Linux 操作系统的开发创造了一个合适的环境，比如编译器 GCC、Bash Shell 就是 Linux 能够诞生的基础之一。</p>
<p>1990 年，自由软件基金会开始正式发展自己的操作系统 Hurd，作为 GNU 项目中的操作系统。不过这个项目再三耽搁，1991 年，Linux 出现，1993 年，FreeBSD 发布，这样 GNU 的开发者开始转向于 Linux 或 FreeBSD，其中，Linux 成为更常见的 GNU 软件运行平台。</p>
<p>斯托曼主张，Linux 操作系统使用了许多 GNU 软件，正式名应为 GNU/Linux，但没有得到 Linux 社群的一致认同，形成著名的 GNU/Linux 命名争议。</p>
<h2 id="tcpip_1">操作系统对 TCP/IP 的支持</h2>
<p><img alt="OSI-TCP/IP" src="/wiki/images/geektime/network-programming/0f783e74927d70794421cf5983f22ae1.png" /></p>
<h1 id="_1">网络编程模型</h1>
<h2 id="-">客户端 - 服务器网络编程模型</h2>
<p><img alt="client-server-model" src="/wiki/images/geektime/network-programming/78e415180d2946c418485d30f3f78f83.png" /></p>
<h2 id="ip">IP 和端口</h2>
<p>在 TCP/IP 协议栈中，IP 用来表示网络世界的地址。</p>
<p>端口号是一个 16 位的整数，最多为 65536。当一个客户端发起连接请求时，客户端的端口是由操作系统内核临时分配的，称为 <strong>临时端口</strong>；服务器端的端口通常是一个众所周知的端口。</p>
<p>一个连接可以通过客户端 - 服务器端的 IP 和端口唯一确定，称做套接字对：</p>
<div class="hlcode"><pre><span class="p">(</span><span class="n">clientaddr</span><span class="o">:</span><span class="n">clientport</span><span class="p">,</span> <span class="n">serveraddr</span><span class="o">:</span><span class="n">serverport</span><span class="p">)</span>
</pre></div>


<h3 id="_2">保留网段</h3>
<p>国际标准组织在 IPv4 地址空间里面，专门划出了一些网段，这些网段不会用做公网上的 IP，而是仅仅保留作内部使用，我们把这些地址称作 <strong>保留网段</strong>。</p>
<table>
<thead>
<tr>
<th>RFC1918 name</th>
<th>IP address range</th>
<th>Number of addresses</th>
<th>Largest CIDR block (subnet mask)</th>
<th>Host ID size</th>
<th>Mask bits</th>
<th>Classful description</th>
</tr>
</thead>
<tbody>
<tr>
<td>24-bit block</td>
<td>10.0.0.0 - 10.255.255.255</td>
<td>16 777 216</td>
<td>10.0.0.0/8 (255.0.0.0)</td>
<td>24 bits</td>
<td>8 bits</td>
<td>single class A network</td>
</tr>
<tr>
<td>20-bit block</td>
<td>172.16.0.0 - 172.31.255.255</td>
<td>1 048 576</td>
<td>172.16.0.0/12 (255.240.0.0)</td>
<td>20 bits</td>
<td>12 bits</td>
<td>16 contiguout class B network</td>
</tr>
<tr>
<td>16-bit block</td>
<td>192.168.0.0 - 192.168.255.255</td>
<td>65 536</td>
<td>192.168.0.0/16 (255.255.0.0)</td>
<td>16 bits</td>
<td>16 bits</td>
<td>256 contiguout class C network</td>
</tr>
</tbody>
</table>
<h2 id="_3">数据报和字节流</h2>
<p>TCP，又被叫做 <strong>字节流套接字（Stream Socket）</strong>，表示为 <code>SOCK_STREAM</code>。</p>
<p>UDP 又被称为 <strong>数据报套接字（Datagram Socket）</strong>，表示为 <code>SOCK_DGRAM</code>。</p>
<p>Datagram Sockets 有时称为“无连接的 sockets”（connectionless sockets）。Stream sockets 是可靠的、双向连接的通讯串流。</p>
<h1 id="_4">套接字和地址</h1>
<h2 id="socket">socket</h2>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2020 .
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2020-05-13 23:28:34</p>
      </span>
    </div>

    
    
  </body>
</html>